<include href="header.html" />
<div class="row">
  <div class="col-md-8">
    <include href="sale-invoice.html" />
  </div>

  <div class="col-md-4">
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="pay-credit-card-heading">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse"
               data-parent="#accordion" href="#pay-credit-card"
               aria-expanded="true" area-controls="pay-credit-card">
              <i class="fa fa-credit-card fa-lg"></i>
              Pay with Credit Card
            </a>
          </h4>
        </div>
        <div id="pay-credit-card" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="pay-credit-card-heading">
          <div class="panel-body">
            <form method="POST"
                  action="process-creditcard-payment" data-ajax="true"
                  id="payment-form">
              <div class="payment-errors alert alert-danger hidden"></div>

              <div class="form-group">
                <label>
                  <span>Amount to be paid</span>
                  <input type="text" class="form-control" disabled
                         value="{{ @amount(@sale.total - @sale.paid) }}">
                </label>
              </div>
              <div class="form-group">
                <label>
                  <span>Card number</span>
                  <input type="text" class="form-control"  autocomplete="cc-number" size="20" data-stripe="number" placeholder="XXXX XXXX XXXX XXXX">
                </label>
              </div>
              <div class="form-group">
                <label>
                  <span>Expiration (MM/YY)</span>
                  <div>
                    <input type="text" class="form-control" style="display: inline; width: auto" size="2" autocomplete="cc-exp-month"  data-stripe="exp_month" placeholder="MM">
                    <span> / </span>
                    <input type="text" class="form-control" style="display: inline; width: auto" size="2" autocomplete="cc-exp-year"  data-stripe="exp_year" placeholder="YY">
                  </div>
                </label>
              </div>
              <div class="form-group">
                <label>
                  <span>Security code (CVC):</span>
                  <input type="text" class="form-control" autocomplete="cc-csc"  size="4" data-stripe="cvc" placeholder="XXX">
                </label>
              </div>

              <input type="hidden" data-stripe="address_zip" value="{{ @billing_address.zip5 }}">

              <input type="hidden" name="amount" value="1000"><!-- dummy -->

              <button type="submit" class="btn btn-primary">
                Pay {{ @amount(@sale.total - @sale.paid) }}
              </button>

            </form>
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="pay-paypal-heading">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse"
               data-parent="#accordion" href="#pay-paypal"
               aria-expanded="true" area-controls="pay-paypal">
              <i class="fa fa-paypal fa-lg"></i>
              Pay with PayPal
            </a>
          </h4>
        </div>
        <div id="pay-paypal" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pay-paypal-heading">
          <div class="panel-body">
            <div class="paypal-prompt">
              <div class="paypal-errors alert alert-danger hidden"></div>
              <div class="form-group">
                <label>
                  <span>Amount to be paid</span>
                  <input type="text" class="form-control" disabled
                         value="{{ @amount(@sale.total - @sale.paid) }}">
                </label>
              </div>
                       
              <script src="https://www.paypalobjects.com/api/button.js?"
                      data-merchant="braintree"
                      data-id="paypal-button"
                      data-button="checkout"
                      data-color="gold"
                      data-size="medium"
                      data-shape="pill"
                      data-button_type="submit"
                      data-button_disabled="false"></script> 
            </div>
            <div class="paypal-waiting hidden">
              <div class="progress progress-striped active"
                   style="height: 1.5em">
                <div class="progress-bar" role="progressbar"
                     aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                     style="width: 100%">
                  Processing PayPal payment&hellip;.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="pay-bitcoin-heading">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse"
               data-parent="#accordion" href="#pay-bitcoin"
               aria-expanded="true" area-controls="pay-bitcoin">
              <i class="fa fa-bitcoin fa-lg"></i>
              Pay with Bitcoin
            </a>
          </h4>
        </div>
        <div id="pay-bitcoin" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pay-bitcoin-heading">
          <div class="panel-body">
            <div id="bitcoin-details" class="hidden">
              <p>To complete your payment, please send bitcoins to the address below.</p>
              <div class="form-group">
                <label>
                  Amount
                  <input type="text" name="amount" class="form-control" disabled>
                </label>
              </div>
                         
              <div class="form-group">
                <label>
                  Address
                  <input type="text" name="receiver" class="form-control" disabled>
                </label>
              </div>

              <a class="uri btn btn-primary" href="#">Open Wallet</a>

            </div>

            <div id="bitcoin-prompt">
              <div class="form-group">
                <label>
                  <span>Amount to be paid</span>
                  <input type="text" class="form-control" disabled
                         value="{{ @amount(@sale.total - @sale.paid) }}">
                </label>
              </div>
              <button id="generate-bitcoin-address" class="btn btn-primary">
                Get Payment Info
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="pay-giftcard-heading">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse"
               data-parent="#accordion" href="#pay-giftcard"
               aria-expanded="true" area-controls="pay-giftcard">
              <i class="fa fa-gift fa-lg"></i>
              Pay with Gift Card
            </a>
          </h4>
        </div>
        <div id="pay-giftcard" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pay-giftcard-heading">
          <div class="panel-body">
            <form id="giftcard-check">
              <div class="errors alert alert-danger hidden"></div>
              <div class="form-group">
                <label for="giftcard">Gift Card Number</label>
                <input type="text" class="form-control" name="giftcard"
                       placeholder="Enter the 11-digit code.">
              </div>
              <button type="submit" class="btn btn-primary">
                Check Balance
              </button>
            </form>
            <form id="giftcard-use" action="process-giftcard-payment"
                  class="hidden">
              <div class="errors alert alert-danger hidden"></div>
              <div class="form-group">
                <label>
                  <span>Gift card balance</span>
                  <input type="text" class="form-control" disabled
                         name="balance" value="0">
                </label>
              </div>
              <input type="hidden" name="amount" value="{{ @sale.total - @sale.paid }}">
              <button type="submit" class="btn btn-primary">
                Pay
              </button>
            </form>
          </div>
        </div>
      </div>

    </div><!-- /.panel-group -->
  </div><!-- /.col-sm-4 -->

</div>
<set script="handle-payment.js" />
<include href="footer.html" />
