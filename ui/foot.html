<footer class="container small">
  <div class="panel panel-default">
    <div class="panel-body row">
      <div class="col-sm-4">
        <ul>
          <li><a href="{{ @BASE }}/">Home</a>
          <li><a href="{{ @BASE }}/art-supplies">Art Supplies</a>
          <li><a href="{{ @BASE }}/framing">Custom Framing</a>
          <li><a href="{{ @BASE }}/buy-gift-card">Buy a Gift Card</a>
        </ul>
      </div>
      <div class="col-sm-4">
        <ul>
          <li><a href="{{ @BASE }}/workshops">Workshops, Classes &amp; Events</a>
          <li><a href="{{ @BASE }}/jobs">Jobs</a>
          <li><a href="{{ @BASE }}/newsletter">Newsletter</a>
          <li><a href="{{ @BASE }}/windowbox">WindowBox Gallery</a>
        </ul>
      </div>
      <div class="col-sm-4">
        <address>
          436 South Main Street<br>
          Los Angeles, CA 90013<br>
          <strong>(800) 729-7060</strong><br>
          <a href="{{ @BASE }}/contact">info@rawmaterialsla.com</a>
        </address>
      </div>
    </div>
    <div class="panel-footer">
      <div class="pull-right text-right">
        Copyright &copy; 2013 &ndash; 2018 <a href="{{ @BASE }}/">Raw Materials Art Supplies</a>
      </div>
      <div class="text-left">
        <a href="{{ @BASE }}/terms">Terms of Use</a>
        •
        <a href="{{ @BASE }}/privacy-policy">Privacy Policy</a>
        •
        <a href="{{ @BASE }}/shipping">Shipping Policy</a>
        •
        <a href="{{ @BASE }}/sales-tax-policy">Sales Tax Policy</a>
      </div>
    </div>
  </div>
</footer>
<check if="{{ @DEBUG }}">
  <true>
    <div id="corner-banner">DEBUG</div>
  </true>
</check>
<script>

window.environmentLoaded= false;

function loadScript(url, callback){
  var script= document.createElement("script")
  script.type= "text/javascript";
  script.async= true;

  if (callback) {
    if (script.readyState) {
      // handle IE
      script.onreadystatechange = function() {
        if (script.readyState == "loaded" ||
            script.readyState == "complete") {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else {
      // handle other browsers
      script.onload= function(){
        callback();
      };
    }
  }

  script.src = url;

  document.getElementsByTagName("head")[0].appendChild(script);
}

function afterLoad(func) {
  if (window.environmentLoaded) {
    func();
  } else {
    document.body.addEventListener('envloaded', func);
  }
}

loadScript('{{ @STATIC }}/code/combined-2018-07-15.js', function() {

  window.environmentLoaded= true;
  var envLoaded= document.createEvent('Event');
  envLoaded.initEvent('envloaded', true, true);
  document.body.dispatchEvent(envLoaded);

  $(window).on('resize', function() {
    $('body').css('padding-top', $('.navbar-fixed-top').height() + 20)
  });
  $('body').css('padding-top', $('.navbar-fixed-top').height() + 20)
  $('.do-popover').popover()
                  .click(function(ev) {
    setTimeout(function() { $(ev.target).popover('hide'); }, 10000);
  });

  // Javascript to enable link to tab
  var hash= document.location.hash;
  var prefix = "tab_";
  if (hash) {
      $('.nav-tabs a[href="'+hash.replace(prefix,"")+'"]').tab('show');
  } 

  // Change hash for page-reload
  $('.nav-tabs a').on('shown.bs.tab', function (e) {
      window.location.hash = e.target.hash.replace("#", "#" + prefix);
  });

  // Fill in cartDetails
  var details= Cookies.getJSON('cartDetails');
  if (details && details.items > 0) {
    $('#cart-button .badge').text('' + details.items + ': $' + details.total)
                            .show();
  }
});
</script>
<check if="{{ isset(@GA_UA) }}">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '{{ @GA_UA }}', '{{ @HOST }}');
  ga('send', 'pageview');
</script>
</check>
<check if="{{ isset(@PIWIK_ROOT) }}">
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + ":{{@PIWIK_ROOT}}/";
    var st=(("https:" == document.location.protocol) ? "https" : "http") + ":{{@STATIC}}/piwik/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', {{ @PIWIK_SITE }}]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
    g.defer=true; g.async=true; g.src=st+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="{{ @PIWIK_ROOT }}/piwik.php?idsite={{ @PIWIK_SITE }}" style="border:0;" alt="" /></p></noscript>
</check>
<script>
var BASE= '{{ @BASE }}/';
</script>
<check if="{{ @PAGE.script || @script }}">
  <script>
    afterLoad(function() {
      <include href="{{ @PAGE.script ? @PAGE.script : @script }}" />
    });
  </script>
</check>
<check if="{{ @ADMIN }}">
  <script>
    afterLoad(function() { loadScript('{{ @BASE }}/admin/admin.js') });
  </script>
</check>
